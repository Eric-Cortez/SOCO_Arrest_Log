"use strict";(self.webpackChunksoco_transparency_dashboard=self.webpackChunksoco_transparency_dashboard||[]).push([[341],{341:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var a=r(214),n=r(861),s=r(152),i=r(791),c=r(286);function o(e,t){for(var r={},a=0;a<e.length;a++){var n=e[a][t];r[n]?r[n]+=1:r[n]=1}return r}var l=r(184);function u(e){var t=e.arrestData,r=o(t,"arrestdegree"),a=[{type:"pie",values:r?Object.values(r):[],labels:r?Object.keys(r):[],text:r?Object.values(r).map((function(e){return"".concat(e," items")})):[],textinfo:"label+percent",insidetextorientation:"radial"}];return(0,l.jsx)("div",{className:"pie-chart",children:t?(0,l.jsx)(c.Z,{data:a,style:{height:"100%",width:"100%"},layout:{title:"Arrest by Degree"},config:{displayModeBar:!1},useResizeHandler:!0}):(0,l.jsx)("div",{children:"Loading..."})})}function d(e){var t=e.arrestData;return(0,l.jsxs)("div",{className:"arrest-count-container",children:[(0,l.jsx)("h3",{children:"Total Arrests"}),(0,l.jsx)("span",{className:"arrest-count-number",children:t.length})]})}function f(e){var t=e.arrestData,r=o(t,"gender"),a=[{type:"pie",values:r?Object.values(r):[],labels:r?Object.keys(r):[],text:r?Object.values(r).map((function(e){return"".concat(e," items")})):[],textinfo:"label+percent",insidetextorientation:"radial"}];return(0,l.jsx)("div",{className:"pie-chart",children:t?(0,l.jsx)(c.Z,{data:a,style:{height:"100%",width:"100%"},config:{displayModeBar:!1},layout:{title:"Arrest by Gender"},useResizeHandler:!0}):(0,l.jsx)("div",{children:"Loading..."})})}function h(e){var t=o(e.arrestData,"arrestcity"),r=[{x:t?Object.keys(t):[],y:t?Object.values(t):[],type:"bar",text:t?Object.values(t).map(String):[],textposition:"auto",hoverinfo:"none",marker:{color:"rgb(32,119,180)",opacity:.6,line:{color:"rgb(8,48,107)",width:2}}}];return(0,l.jsx)("div",{className:"bar-chart",children:(0,l.jsx)(c.Z,{data:r,layout:{title:"Arrest by Location",xaxis:{title:"City"},yaxis:{title:"Number of Arrests",tickmode:"linear",dtick:1}},config:{displayModeBar:!1},useResizeHandler:!0})})}var x=function(e){var t=e.arrestData,r={};t.forEach((function(e){var t=e.fullagencyname;r[t]=(r[t]||0)+1}));var a=Object.keys(r).sort((function(e,t){return r[t]-r[e]})),n=[{type:"bar",x:a,y:a.map((function(e){return r[e]})),marker:{color:"rgb(32,119,180)"}}];return(0,l.jsx)("div",{className:"bar-chart",children:(0,l.jsx)(c.Z,{data:n,layout:{title:"Arrests by Agency",responsive:!0,xaxis:{title:"Arresting Agency",automargin:!0},yaxis:{title:"Number of Arrests",tickmode:"linear",automargin:!0,dtick:1},margin:{l:120,r:20,t:60,b:20}},useResizeHandler:!0,config:{displayModeBar:!1},style:{width:"100%",height:"100%"}})})};function y(e){var t=e.arrestData,r=(0,i.useState)([]),a=(0,s.Z)(r,2),n=a[0],o=a[1],u=(0,i.useState)([]),d=(0,s.Z)(u,2),f=d[0],h=d[1];if((0,i.useEffect)((function(){var e={};t.forEach((function(t){t.chargedescription.split("<br/>").filter((function(e){return"----------"!==e})).forEach((function(t){if(t=t.trim().split(";")){var r=t[t.length-1];e[r]=(e[r]||0)+1}}))}));var r=Object.keys(e).sort((function(t,r){return e[r]-e[t]})).slice(0,10);o(r),h(e)}),[t]),0===n.length)return null;var x=[{x:n.map((function(e){return f[e]})),y:n,type:"bar",orientation:"h"}];return(0,l.jsx)("div",{className:"bar-chart",children:(0,l.jsx)(c.Z,{data:x,layout:{title:"Arrests by Charge",margin:{l:150,r:20,t:60,b:50},xaxis:{title:"Number of Arrests"},yaxis:{title:"Charge description",tickmode:"linear",automargin:!0,dtick:1}},config:{displayModeBar:!1},useResizeHandler:!0})})}function v(){var e=(0,i.useState)([]),t=(0,s.Z)(e,2),r=t[0],c=t[1];(0,i.useEffect)((function(){o()}),[]);var o=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://data.sonomacounty.ca.gov/resource/f6uf-eqmk.json");case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,c(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:"page-content",children:[(0,l.jsx)("h2",{className:"pg-header",children:"Arrests Dashboard"}),(0,l.jsxs)("div",{className:"dashboard",children:[(0,l.jsx)(d,{arrestData:r}),(0,l.jsx)(u,{arrestData:r}),(0,l.jsx)(f,{arrestData:r}),(0,l.jsx)(x,{arrestData:r}),(0,l.jsx)(h,{arrestData:r}),(0,l.jsx)(y,{arrestData:r})]})]})}}}]);
//# sourceMappingURL=341.3e153803.chunk.js.map